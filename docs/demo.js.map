{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./demo/index.js","webpack:///./controller.js","webpack:///./demo/dev-console.js"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","controller","[object Object]","args","this","device","undefined","filters","vendorId","productId","universe","Array","fill","navigator","usb","requestDevice","then","selectedDevice","getDevices","devices","getPairedDevice","Promise","resolve","reject","Error","connect","open","configuration","selectConfiguration","claimInterface","controlTransferOut","requestType","recipient","request","index","data","buffer","Uint8Array","from","transferOut","channel","Number","isInteger","splice","isArray","length","send","close","devConsole","output","logUniverseElement","logUniverseEnabled","addEventListener","e","target","checked","message","type","fullMessage","JSON","stringify","console","log","scrollTop","scrollHeight","productName","configurations","deviceClass","deviceProtocol","deviceSubclass","deviceVersionMajor","deviceVersionMinor","deviceVersionSubminor","manufacturerName","opened","serialNumber","usbVersionMajor","usbVersionMinor","usbVersionSubminor","vendorIdHex","toString","productIdHex","document","getElementById","activateButton","disconnectButton","setChannelForm","color","dimmer","uv","strobe","enable","logUsbDevice","catch","error","disconnect","autoConnect","preventDefault","FormData","parseInt","updateUniverse","logUniverse","match","map","v"],"mappings":"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","file":"demo.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import Controller from '../controller.js'\nimport DevConsole from './dev-console.js'\n\nconst controller = new Controller()\nconst devConsole = new DevConsole({\n  output : document.getElementById('console'),\n  logUniverseElement : document.getElementById('logUniverse')\n})\n\nconst activateButton = document.getElementById('activateWebUsb')\nconst disconnectButton = document.getElementById('disconnectWebUsb')\n\nconst setChannelForm = document.getElementById('updateAnyChannel')\nconst color = document.getElementById('changeColor')\nconst dimmer = document.getElementById('changeDimmer')\nconst uv = document.getElementById('changeUv')\nconst strobe = document.getElementById('changeStrobe')\n\n\n\n// Listen for click events on the activate button\nactivateButton.addEventListener('click', e => {\n\n  // Enable WebUSB and select the Arduino\n  controller.enable().then(() => {\n\n    // Create a connection to the selected Arduino\n    controller.connect().then(() => {\n\n      // Successfully created a connection to the device\n      devConsole.logUsbDevice(controller.device)\n    })\n    .catch((error) => {\n      devConsole.log('connect:', error, 'string')\n    })\n\n  })\n  .catch(() => {\n    devConsole.log('No USB device was selected', '', 'string')\n  })\n\n})\n\n\n\n// Disconnect from USB device\ndisconnectButton.addEventListener('click', e => {\n  controller.disconnect().then(() => {\n    devConsole.log('Destroyed connection to USB device, but USB device is still paired with the browser', '', 'string')\n  })\n})\n\n\n\n// Automatically connect to paired USB device\ncontroller.autoConnect()\n  .then(() => {\n    devConsole.log('Found an already paired USB device', '', 'string')\n    devConsole.logUsbDevice(controller.device)\n  })\n  .catch((error) => {\n    devConsole.log('autoConnect:', error, 'string')\n  })\n\n\n\n// Listen for submit events to change the value of a channel\nsetChannelForm.addEventListener('submit', e => {\n  e.preventDefault()\n\n  // Get data out of form\n  const data = new FormData(setChannelForm)\n\n  // Parse the data into an Integer\n  const channel = parseInt(data.get('channel'), 10)\n  const value = parseInt(data.get('value'), 10)\n\n  devConsole.log('---', '', 'string')\n  devConsole.log(`Set Channel ${channel} to ${value}`, '', 'string')\n\n  // Update the universe\n  controller.updateUniverse(channel, value)\n  .then(() => {\n    devConsole.logUniverse(controller.universe)\n  })\n  .catch((error) => {\n    devConsole.logUniverse(controller.universe)\n    devConsole.log(error, '', 'string')\n  })\n})\n\n\n\n/*\n * Fixture: Flat PAR with RGB LEDs\n * Amount of channels: 6\n * Address in Universe: 1\n *\n * Channel #1: Red\n * Channel #2: Green\n * Channel #3: Blue\n * Channel #4: UV\n * Channel #5: Dimmer\n * Channel #6: Strobe\n */\n\n/*\n * Color = Red, Green & Blue = 3 Channels\n */\ncolor.addEventListener('change', e => {\n  // Convert hex color to RGB\n  let value = e.target.value.match(/[A-Za-z0-9]{2}/g).map(v => parseInt(v, 16))\n\n  devConsole.log('---', '', 'string')\n  devConsole.log(`Set Color on Channel 1 - 3 to ${value}`, '', 'string')\n\n  // Update starts at channel 1 and goes until channel 3\n  // Why? We are sending an array with 3 values\n  controller.updateUniverse(1, value)\n  .then(() => {\n    devConsole.logUniverse(controller.universe)\n  })\n  .catch((error) => {\n    devConsole.logUniverse(controller.universe)\n    devConsole.log(error, '', 'string')\n  })\n})\n\n\n\n/*\n * UV = 1 Channel\n * Control the intensity of UV light\n */\nuv.addEventListener('change', e => {\n  let value = parseInt(e.target.value, 10)\n\n  devConsole.log('---', '', 'string')\n  devConsole.log(`Set UV on Channel 4 to ${value}`, '', 'string')\n\n  // Update starts at channel 4\n  controller.updateUniverse(4, value)\n  .then(() => {\n    devConsole.logUniverse(controller.universe)\n  })\n  .catch((error) => {\n    devConsole.logUniverse(controller.universe)\n    devConsole.log(error, '', 'string')\n  })\n\n})\n\n\n\n/*\n * Dimmer = 1 Channel\n * Control the brightness of the PAR light\n * If dimmer is 0, then no color / UV is shown\n * If dimmer is 255, then LEDs are at full brightness\n */\ndimmer.addEventListener('change', e => {\n  let value = parseInt(e.target.value, 10)\n\n  devConsole.log('---', '', 'string')\n  devConsole.log(`Set Dimmer on Channel 5 to ${value}`, '', 'string')\n\n  // Update starts at channel 5\n  controller.updateUniverse(5, value)\n  .then(() => {\n    devConsole.logUniverse(controller.universe)\n  })\n  .catch((error) => {\n    devConsole.logUniverse(controller.universe)\n    devConsole.log(error, '', 'string')\n  })\n})\n\n\n\n/*\n * Strobe = 1 Channel\n * Control the strobe effect\n * If strobe is 0, no flashing of the LEDs\n * If strobe is 255, then the LEDs flash at a super high rate\n */\nstrobe.addEventListener('change', e => {\n  let value = parseInt(e.target.value, 10)\n\n  devConsole.log('---', '', 'string')\n  devConsole.log(`Set Strobe on Channel 6 to ${value}`, '', 'string')\n\n  // Update starts at channel 6\n  controller.updateUniverse(6, value)\n  .then(() => {\n    devConsole.logUniverse(controller.universe)\n  })\n  .catch((error) => {\n    devConsole.logUniverse(controller.universe)\n    devConsole.log(error, '', 'string')\n  })\n})\n","/**\n * The controller is creating a connection to the USB device (Arduino) to send data over WebUSB.\n * By using the default <code>args</code> you will only see the following Arduino in the user prompt:\n * - Arduino Leonardo\n * - Arduino Leonardo ETH\n * - Seeeduino Lite\n * @module Controller\n *\n * @param {Object} args - Arguments to configure the controller\n * @param {Object[]} args.filters - List of devices that are whitelisted when opening the user prompt to select an Arduino\n * @param {Object} args.device - The selected Arduino to use as the DMX512 controller\n * @param {number[]} args.universe - Holds all the values for each channel of the DMX512 universe\n * @example\n * import Controller from 'webusb-dmx512-controller/controller.js'\n *\n * // Create a new controller using the default properties\n * const controller = new Controller()\n */\nexport default class Controller {\n\n  constructor(args = {}) {\n    // Reference to the selected USB device\n    this.device = args.device || undefined\n\n    // Only allow specific USB devices\n    this.filters = args.filters || [\n      // Arduino Leonardo\n      { vendorId: 0x2341, productId: 0x8036 },\n      { vendorId: 0x2341, productId: 0x0036 },\n      { vendorId: 0x2a03, productId: 0x8036 },\n      { vendorId: 0x2a03, productId: 0x0036 },\n\n      // Arduino Leonardo ETH\n      { vendorId: 0x2a03, productId: 0x0040 },\n      { vendorId: 0x2a03, productId: 0x8040 },\n\n      // Seeeduino Lite\n      { vendorId: 0x2886, productId: 0x8002 }\n    ]\n\n    // The DMX512 universe with 512 channels\n    this.universe = args.universe || new Array(512).fill(0)\n  }\n\n  /**\n   * Enable WebUSB and save the selected Arduino into <code>controller.device</code>\n   *\n   * Note: This function has to be triggered by a user gesture\n   *\n   * @return {Promise}\n   *\n   * @example\n   * controller.enable().then(() => {\n   *   // Create a connection to the selected Arduino\n   *   controller.connect().then(() => {\n   *     // Successfully created a connection\n   *   })\n   * })\n   * .catch(error => {\n   *   // No Arduino was selected by the user\n   * })\n   */\n  enable() {\n    // Request access to the USB device\n    return navigator.usb.requestDevice({ filters: this.filters })\n\n    // selectedDevice = the USB device that was selected by the user in the browser\n    .then(selectedDevice => {\n      this.device = selectedDevice\n    })\n  }\n\n  /**\n   * Get a USB device that was already paired with the browser.\n   *\n   * @return {Promise}\n   */\n  getPairedDevice() {\n    return navigator.usb.getDevices()\n\n    .then(devices => {\n      return devices[0]\n    })\n  }\n\n  /**\n   * Automatically connect to a USB device that was already paired with the Browser and save it into <code>controller.device</code>\n   *\n   * @return {Promise}\n   * @example\n   * controller.autoConnect()\n   *   .then(() => {\n   *     // Connected to already paired Arduino\n   *   })\n   *   .catch(error => {\n   *     // Nothing found or found paired Arduino, but it's not connected to computer\n   *   })\n   */\n  autoConnect() {\n    return this.getPairedDevice().then((device) => {\n\n      this.device = device\n\n      return new Promise((resolve, reject) => {\n\n        // USB Device is not connected to the computer\n        if (this.device === undefined) {\n          return reject(new Error('Can not find USB device.'))\n\n        // USB device is connected to the computer, so try to create a WebUSB connection\n        } else {\n          return resolve(this.connect())\n        }\n\n      })\n\n    })\n  }\n\n  /**\n   * Open a connection to the selected USB device and tell the device that\n   * we are ready to send data to it.\n   *\n   * @return {Promise}\n   * @example\n   * controller.connect().then(() => {\n   *   // Successfully created a connection to the selected Arduino\n   * })\n   */\n  connect() {\n    // Open connection\n    return this.device.open()\n\n    // Select #1 configuration if not automatially set by OS\n    .then(() => {\n      if (this.device.configuration === null) {\n        return this.device.selectConfiguration(1)\n      }\n    })\n\n    // Get exclusive access to the #2 interface\n    .then(() => this.device.claimInterface(2))\n\n    // Tell the USB device that we are ready to send data\n    .then(() => this.device.controlTransferOut({\n        // It's a USB class request\n        'requestType': 'class',\n        // The destination of this request is the interface\n        'recipient': 'interface',\n        // CDC: Communication Device Class\n        // 0x22: SET_CONTROL_LINE_STATE\n        // RS-232 signal used to tell the USB device that the computer is now present.\n        'request': 0x22,\n        // Yes\n        'value': 0x01,\n        // Interface #2\n        'index': 0x02\n      })\n    )\n  }\n\n  /**\n   * Send data to the USB device to update the DMX512 universe\n   *\n   * @param {Array} data - List containing all channels that should be updated in the universe\n   *\n   * @return {Promise}\n   * @example\n   * controller.send([255, 0, 0])\n   */\n  send(data) {\n    return new Promise((resolve, reject) => {\n\n      // USB Device is not connected to the computer\n      if (this.device === undefined) {\n        return reject(new Error('USB device is not connected to the computer'))\n\n      // USB device is connected to the computer, so try to create a WebUSB connection\n      } else {\n        // Create an ArrayBuffer, because that is needed for WebUSB\n        const buffer = Uint8Array.from(data)\n\n        // Send data on Endpoint #4\n        return resolve(this.device.transferOut(4, buffer))\n      }\n\n    })\n  }\n\n  /**\n   * Update the <code>channel</code>(s) of the DMX512 universe with the provided <code>value</code>\n   *\n   * @param {number} channel - The channel to update\n   * @param {(number|number[])} value - The value to update the channel, supporting two different modes: single (= <code>number</code>) & multi (= <code>Array</code>)\n   * @example <caption>Update a single channel</caption>\n   * // Update channel #1\n   * controller.updateUniverse(1, 255)\n   * @example <caption>Update multiple channels starting with channel</caption>\n   * // Update channel #5 with 255, #6 with 0 & #7 with 20\n   * controller.updateUniverse(5, [255, 0, 20])\n   */\n  updateUniverse(channel, value) {\n    return new Promise((resolve, reject) => {\n\n      // The DMX512 universe starts with channel 1, but the array with 0\n      channel = channel - 1\n\n      // Single\n      if (Number.isInteger(value)) {\n        this.universe.splice(channel, 1, value)\n\n      // Multiple\n      } else if (Array.isArray(value)) {\n        this.universe.splice(channel, value.length, ...value)\n      \n      } else {\n        return reject(new Error('Could not update Universe because the provided value is not of type number or number[]'))\n      }\n\n      // Send the updated universe to the DMX512 controller\n      return resolve(this.send(this.universe))\n\n    })\n  }\n\n  /**\n   * Disconnect from the USB device\n   *\n   * Note: The device is still paired to the browser!\n   *\n   * @return {Promise}\n   * @example\n   * controller.disconnect().then(() => {\n   *   // Destroyed connection to USB device, but USB device is still paired with the browser\n   *})\n   */\n  disconnect() {\n    // Declare that we don't want to receive data anymore\n    return this.device.controlTransferOut({\n      // It's a USB class request\n      'requestType': 'class',\n      // The destination of this request is the interface\n      'recipient': 'interface',\n      // CDC: Communication Device Class\n      // 0x22: SET_CONTROL_LINE_STATE\n      // RS-232 signal used to tell the USB device that the computer is not present anymore\n      'request': 0x22,\n      // No\n      'value': 0x01,\n      // Interface #2\n      'index': 0x02\n    })\n\n    // Close the connection to the USB device\n    .then(() => this.device.close())\n  }\n}\n","/**\n * Helper to log messages into an <code>output</code> DOM element and the\n * console in the browser.\n */\nexport default class DevConsole {\n  constructor(args = {}) {\n    // The element to write the log messages to\n    this.output = args.output\n\n    // The element to toggle \"logUniverseEnabled\"\n    this.logUniverseElement = args.logUniverseElement\n\n    // Is logging the content of the universe enabled?\n    this.logUniverseEnabled = false\n\n    // Listen for changes to enable / disable \"log universe to console\"\n    this.logUniverseElement.addEventListener('change', e => {\n      const { target } = e\n\n      this.logUniverseEnabled = target.checked\n    })\n  }\n\n  /**\n   * Log a message to the <code>output</code> and the browser console\n   */\n  log(message, data, type) {\n    let fullMessage = ''\n\n    switch (type) {\n      case 'USBDevice':\n        fullMessage = `${message}: ${data}`\n        break\n\n      case 'array':\n        fullMessage = message + JSON.stringify(data)\n        break\n\n      case 'keyvalue':\n        fullMessage = `${message}: ${data}`\n        break\n\n      default:\n        fullMessage = message + ' ' + data\n    }\n\n    console.log(fullMessage)\n\n    this.output.value += fullMessage + '\\n'\n\n    // Automatically scroll to the bottom\n    this.output.scrollTop = this.output.scrollHeight\n  }\n\n  /*\n   * Basic information about the USB device\n   */\n   logUsbDevice(device) {\n    this.log('---', '', 'string')\n    this.log('Selected device', device.productName, 'USBDevice')\n    this.log('---', '', 'string')\n\n    const { configuration, configurations, deviceClass, deviceProtocol,\n      deviceSubclass, deviceVersionMajor, deviceVersionMinor,\n      deviceVersionSubminor, manufacturerName, opened, productId,\n      productName, serialNumber, usbVersionMajor, usbVersionMinor,\n      usbVersionSubminor, vendorId } = device\n\n    // Convert IDs from decimal to hex\n    const vendorIdHex = vendorId.toString(16)\n    const productIdHex = productId.toString(16)\n\n    this.log('Opened', opened, 'keyvalue')\n    this.log('Vendor ID', `${vendorId} (0x${vendorIdHex})`, 'keyvalue')\n    this.log('Manufacturer Name', manufacturerName, 'keyvalue')\n    this.log('Product ID', `${productId} (0x${productIdHex})`, 'keyvalue')\n    this.log('Product Name', productName, 'keyvalue')\n    this.log('Serialnumber', serialNumber, 'keyvalue')\n\n    this.log('Device Class', deviceClass, 'keyvalue')\n    this.log('Device Protocol', deviceProtocol, 'keyvalue')\n    this.log('Device Subclass', deviceSubclass, 'keyvalue')\n    this.log('Device Version Major', deviceVersionMajor, 'keyvalue')\n    this.log('Device Version Minor', deviceVersionMinor, 'keyvalue')\n    this.log('Device Version Subminor', deviceVersionSubminor, 'keyvalue')\n\n    this.log('USB Version Major', usbVersionMajor, 'keyvalue')\n    this.log('USB Version Minor', usbVersionMinor, 'keyvalue')\n    this.log('USB Version Subminor', usbVersionSubminor, 'keyvalue')\n  }\n\n  /**\n   * The whole content of the universe if <code>logUniverseEnabled</code>\n   */\n  logUniverse(universe) {\n    if (this.logUniverseEnabled) {\n      this.log('', universe, 'array')\n    }\n  }\n}\n"],"sourceRoot":""}